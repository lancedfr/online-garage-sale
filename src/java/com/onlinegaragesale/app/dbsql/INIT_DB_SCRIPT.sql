DROP TABLE BID CASCADE CONSTRAINTS 
;
DROP TABLE CATEGORY CASCADE CONSTRAINTS 
;
DROP TABLE GARAGE CASCADE CONSTRAINTS 
;
DROP TABLE PRODUCT CASCADE CONSTRAINTS 
;
DROP TABLE PRODUCTSALES CASCADE CONSTRAINTS 
;
DROP TABLE SALESHISTORY CASCADE CONSTRAINTS 
;
DROP TABLE USERACCOUNT CASCADE CONSTRAINTS 
;
DROP sequence BID_ID_SEQ
;
DROP sequence CATEGORY_ID_SEQ
;
DROP sequence GARAGE_ID_SEQ
;
DROP sequence PRODUCT_ID_SEQ
;
DROP sequence PRODUCTSALES_ID_SEQ
;
DROP sequence SALESHISTORY_ID_SEQ
;
DROP sequence USERACCOUNT_ID_SEQ
;
CREATE TABLE BID 
    ( 
     BIDID NUMBER  NOT NULL , 
     BIDAMOUNT NUMBER (6,2)  NOT NULL , 
     BIDSTATUS CHAR (1 BYTE) DEFAULT '0' , 
     USERID NUMBER (19)  NOT NULL , 
     PRODID NUMBER (19)  NOT NULL 
    ) 
        TABLESPACE USERS 
        LOGGING 
;


CREATE UNIQUE INDEX BID_PK ON BID 
    ( 
     BIDID ASC 
    ) 
    TABLESPACE USERS 
    LOGGING 
;

ALTER TABLE BID 
    ADD CONSTRAINT BID_PK PRIMARY KEY ( BIDID ) 
    USING INDEX BID_PK ;



CREATE TABLE CATEGORY 
    ( 
     CATEGORYID NUMBER  NOT NULL , 
     CATEGORYTYPE VARCHAR2 (255 BYTE) 
    ) 
        TABLESPACE USERS 
        LOGGING 
;


CREATE UNIQUE INDEX CATEGORY_PK ON CATEGORY 
    ( 
     CATEGORYID ASC 
    ) 
    TABLESPACE USERS 
    LOGGING 
;
CREATE INDEX CATEGORY_CATEGORYTYPE_INDEX ON CATEGORY 
    ( 
     CATEGORYTYPE ASC 
    ) 
    TABLESPACE USERS 
    LOGGING 
;

ALTER TABLE CATEGORY 
    ADD CONSTRAINT CATEGORY_PK PRIMARY KEY ( CATEGORYID ) 
    USING INDEX CATEGORY_PK ;



CREATE TABLE GARAGE 
    ( 
     GARAGEID NUMBER  NOT NULL , 
     USERID NUMBER (19)  NOT NULL , 
     GARAGETYPE VARCHAR2 (255 BYTE) DEFAULT 'SMALL' , 
     OPENDATE DATE DEFAULT SYSDATE  NOT NULL , 
     CLOSEDATE DATE 
    ) 
        TABLESPACE USERS 
        LOGGING 
;


CREATE UNIQUE INDEX GARAGE_PK ON GARAGE 
    ( 
     GARAGEID ASC 
    ) 
    TABLESPACE USERS 
    LOGGING 
;

ALTER TABLE GARAGE 
    ADD CONSTRAINT GARAGE_PK PRIMARY KEY ( GARAGEID ) 
    USING INDEX GARAGE_PK ;



CREATE TABLE PRODUCT 
    ( 
     PRODID NUMBER (19)  NOT NULL , 
     PRODCONDITION VARCHAR2 (255 BYTE) DEFAULT 'AVERAGE' , 
     PRODDESC VARCHAR2 (255 BYTE) , 
     PRODIMAGE BLOB , 
     PRODPRICE NUMBER (19,2) , 
     PRODSTATUS CHAR (1 BYTE) DEFAULT '0' , 
     GARAGEID NUMBER  NOT NULL , 
     CATEGORYID NUMBER  NOT NULL 
    ) 
        TABLESPACE USERS 
        LOGGING 
    LOB ( PRODIMAGE ) STORE AS 
        ( 
        TABLESPACE USERS 
        STORAGE ( 
            PCTINCREASE 0 
            MINEXTENTS 1 
            MAXEXTENTS UNLIMITED 
            FREELISTS 1 
            BUFFER_POOL DEFAULT 
        ) 
        CHUNK 8192 
        RETENTION 
        ENABLE STORAGE IN ROW
        NOCACHE LOGGING 
    ) 
;


CREATE UNIQUE INDEX PRODUCT_PK ON PRODUCT 
    ( 
     PRODID ASC 
    ) 
    TABLESPACE USERS 
    LOGGING 
;

ALTER TABLE PRODUCT 
    ADD CONSTRAINT PRODUCT_PK PRIMARY KEY ( PRODID ) 
    USING INDEX PRODUCT_PK ;



CREATE TABLE PRODUCTSALES 
    ( 
     PRODID NUMBER  NOT NULL , 
     PRODCONDITION VARCHAR2 (255 BYTE) DEFAULT 'AVERAGE' , 
     PRODDESC VARCHAR2 (255 BYTE) , 
     PRODIMAGE BLOB , 
     PRODPRICE NUMBER (6,2) , 
     USERID NUMBER (19)  NOT NULL , 
     BIDDERID NUMBER (19)  NOT NULL 
    ) 
        TABLESPACE USERS 
        LOGGING 
    LOB ( PRODIMAGE ) STORE AS 
        ( 
        TABLESPACE USERS 
        STORAGE ( 
            PCTINCREASE 0 
            MINEXTENTS 1 
            MAXEXTENTS UNLIMITED 
            FREELISTS 1 
            BUFFER_POOL DEFAULT 
        ) 
        CHUNK 8192 
        RETENTION 
        ENABLE STORAGE IN ROW
        NOCACHE LOGGING 
    ) 
;


CREATE UNIQUE INDEX PRODUCTSALES_PK ON PRODUCTSALES 
    ( 
     PRODID ASC 
    ) 
    TABLESPACE USERS 
    LOGGING 
;

ALTER TABLE PRODUCTSALES 
    ADD CONSTRAINT PRODUCTSALES_PK PRIMARY KEY ( PRODID ) 
    USING INDEX PRODUCTSALES_PK ;



CREATE TABLE SALESHISTORY 
    ( 
     USERID NUMBER (19)  NOT NULL , 
     TOTALSALES NUMBER (6,2) , 
     TOTALSALESCOUNT NUMBER 
    ) 
        TABLESPACE USERS 
        LOGGING 
;


CREATE INDEX SALESHISTORY_USERID_IDX ON SALESHISTORY 
    ( 
     USERID ASC 
    ) 
    TABLESPACE USERS 
    LOGGING 
;

ALTER TABLE SALESHISTORY 
    ADD CONSTRAINT SALESHISTORY_PK PRIMARY KEY ( USERID ) 
    USING INDEX SALESHISTORY_USERID_IDX ;



CREATE TABLE USERACCOUNT 
    ( 
     USERID NUMBER (19)  NOT NULL , 
     FIRSTNAME VARCHAR2 (255 BYTE)  NOT NULL , 
     MIDDLENAME VARCHAR2 (255 BYTE) , 
     LASTNAME VARCHAR2 (255 BYTE)  NOT NULL , 
     DOB DATE  NOT NULL , 
     AGE NUMBER (3) , 
     EMAIL VARCHAR2 (255 BYTE)  NOT NULL , 
     HOMETELL VARCHAR2 (255 BYTE) , 
     WORKTELL VARCHAR2 (255 BYTE) , 
     CELL VARCHAR2 (255 BYTE) , 
     ADDRESSLINE VARCHAR2 (255 BYTE) , 
     ROAD VARCHAR2 (255 BYTE) , 
     CITY VARCHAR2 (255 BYTE) , 
     SUBURB VARCHAR2 (255 BYTE) , 
     COUNTRY VARCHAR2 (255 BYTE)  NOT NULL , 
     AREACODE VARCHAR2 (255 BYTE)  NOT NULL , 
     ACCOUNTPASSWORD VARCHAR2 (255 BYTE)  NOT NULL 
    ) 
        TABLESPACE USERS 
        LOGGING 
;


CREATE UNIQUE INDEX USERACCOUNT_PK ON USERACCOUNT 
    ( 
     USERID ASC 
    ) 
    TABLESPACE USERS 
    LOGGING 
;
CREATE INDEX USERACCOUNT_CITY_INDEX ON USERACCOUNT 
    ( 
     CITY ASC 
    ) 
    TABLESPACE USERS 
    LOGGING 
;
CREATE INDEX USERACCOUNT_LASTNAME_INDEX ON USERACCOUNT 
    ( 
     LASTNAME ASC 
    ) 
    TABLESPACE USERS 
    LOGGING 
;

ALTER TABLE USERACCOUNT 
    ADD CONSTRAINT USERACCOUNT_PK PRIMARY KEY ( USERID ) 
    USING INDEX USERACCOUNT_PK ;




ALTER TABLE BID 
    ADD CONSTRAINT BID_PRODUCT_FK FOREIGN KEY 
    ( 
     PRODID
    ) 
    REFERENCES PRODUCT 
    ( 
     PRODID
    ) 
    NOT DEFERRABLE 
;


ALTER TABLE GARAGE 
    ADD CONSTRAINT GARAGE_USERACCOUNT_FK FOREIGN KEY 
    ( 
     USERID
    ) 
    REFERENCES USERACCOUNT 
    ( 
     USERID
    ) 
    NOT DEFERRABLE 
;


ALTER TABLE PRODUCTSALES 
    ADD CONSTRAINT PRODUCTSALES_SALESHISTORY_FK FOREIGN KEY 
    ( 
     USERID
    ) 
    REFERENCES SALESHISTORY 
    ( 
     USERID
    ) 
    NOT DEFERRABLE 
;


ALTER TABLE PRODUCT 
    ADD CONSTRAINT PRODUCT_CATEGORY_FK FOREIGN KEY 
    ( 
     CATEGORYID
    ) 
    REFERENCES CATEGORY 
    ( 
     CATEGORYID
    ) 
    NOT DEFERRABLE 
;


ALTER TABLE PRODUCT 
    ADD CONSTRAINT PRODUCT_GARAGE_FK FOREIGN KEY 
    ( 
     GARAGEID
    ) 
    REFERENCES GARAGE 
    ( 
     GARAGEID
    ) 
    NOT DEFERRABLE 
;


ALTER TABLE SALESHISTORY 
    ADD CONSTRAINT SALESHISTORY_USERACCOUNT_FK FOREIGN KEY 
    ( 
     USERID
    ) 
    REFERENCES USERACCOUNT 
    ( 
     USERID
    ) 
    NOT DEFERRABLE 
;

CREATE SEQUENCE BID_ID_SEQ 
    INCREMENT BY 1 
    START WITH 9
    MAXVALUE 9999999999999999999999999999 
    MINVALUE 1 
    CACHE 20 
;

CREATE SEQUENCE CATEGORY_ID_SEQ 
    INCREMENT BY 1  
    START WITH 5
    MAXVALUE 9999999999999999999999999999 
    MINVALUE 1 
    CACHE 20 
;

CREATE SEQUENCE GARAGE_ID_SEQ 
    INCREMENT BY 1  
    START WITH 4
    MAXVALUE 9999999999999999999999999999 
    MINVALUE 1 
    CACHE 20 
;

CREATE SEQUENCE PRODUCTSALES_ID_SEQ 
    INCREMENT BY 1
    MAXVALUE 9999999999999999999999999999 
    MINVALUE 1 
    CACHE 20 
;

CREATE SEQUENCE PRODUCT_ID_SEQ 
    INCREMENT BY 1 
    START WITH 6
    MAXVALUE 9999999999999999999999999999 
    MINVALUE 1 
    CACHE 20 
;

CREATE SEQUENCE SALESHISTORY_ID_SEQ 
    INCREMENT BY 1
    MAXVALUE 9999999999999999999999999999 
    MINVALUE 1 
    CACHE 20 
;

CREATE SEQUENCE USERACCOUNT_ID_SEQ 
    INCREMENT BY 1  
    START WITH 4004
    MAXVALUE 99999999 
    MINVALUE 1 
    CACHE 20 
;

INSERT INTO USERACCOUNT (USERID,ACCOUNTPASSWORD,ADDRESSLINE,AREACODE,CITY,COUNTRY,ROAD,SUBURB,AGE,CELL,EMAIL,HOMETELL,WORKTELL,DOB,FIRSTNAME,LASTNAME,MIDDLENAME) VALUES (20124001,'LANCEREID','4 ROLWYN COURT','7945','CAPE TOWN','SOUTH AFRICA','VLEI ROAD','LAKESIDE',22,'0731129035','LANCEDFR@OUTLOOK.COM','7882966','7882566',TO_DATE('02/APR/90','DD/MON/RR'),'LANCE','REID','DAVID');
INSERT INTO USERACCOUNT (USERID,ACCOUNTPASSWORD,ADDRESSLINE,AREACODE,CITY,COUNTRY,ROAD,SUBURB,AGE,CELL,EMAIL,HOMETELL,WORKTELL,DOB,FIRSTNAME,LASTNAME,MIDDLENAME) VALUES (20124002,'DEVONRICHARDS','7 MIKE WAY','7945','CAPE TOWN','SOUTH AFRICA','9TH ROAD','TOKAI',20,'0758864589','DEVON@GMAIL.COM','7854568','7785542',TO_DATE('03/JUL/92','DD/MON/RR'),'DEVON','RICHARDS','CARL');
INSERT INTO USERACCOUNT (USERID,ACCOUNTPASSWORD,ADDRESSLINE,AREACODE,CITY,COUNTRY,ROAD,SUBURB,AGE,CELL,EMAIL,HOMETELL,WORKTELL,DOB,FIRSTNAME,LASTNAME,MIDDLENAME) VALUES (20124003,'DWAYNEPETERSON','22A MAIN FLAT','8080','CAPE TOWN','SOUTH AFRICA','6 EAST ROAD','TABLE VIEW',21,'0852368845','DWAYNE@GMAIL.COM','7882546','7895246',TO_DATE('22/FEB/91','DD/MON/RR'),'DWAYNE','PETERSON','SIMON');
INSERT INTO GARAGE (GARAGEID,USERID,GARAGETYPE,OPENDATE,CLOSEDATE) VALUES (1,20124001,'SMALL',TO_DATE('22/SEP/12','DD/MON/RR'),TO_DATE('22/OCT/12','DD/MON/RR'));
INSERT INTO GARAGE (GARAGEID,USERID,GARAGETYPE,OPENDATE,CLOSEDATE) VALUES (2,20124002,'BIG',TO_DATE('10/SEP/12','DD/MON/RR'),TO_DATE('10/OCT/12','DD/MON/RR'));
INSERT INTO GARAGE (GARAGEID,USERID,GARAGETYPE,OPENDATE,CLOSEDATE) VALUES (3,20124003,'MID',TO_DATE('22/AUG/12','DD/MON/RR'),TO_DATE('22/SEP/12','DD/MON/RR'));
INSERT INTO CATEGORY (CATEGORYID,CATEGORYTYPE) VALUES (1,'LIGHTING');
INSERT INTO CATEGORY (CATEGORYID,CATEGORYTYPE) VALUES (2,'ELECTRONIC');
INSERT INTO CATEGORY (CATEGORYID,CATEGORYTYPE) VALUES (3,'MOBILE');
INSERT INTO CATEGORY (CATEGORYID,CATEGORYTYPE) VALUES (4,'SOUND');
INSERT INTO PRODUCT (PRODID,PRODCONDITION,PRODDESC,PRODPRICE,PRODSTATUS,GARAGEID,CATEGORYID) VALUES (1,'GOOD','NOKIA 701',3800,'0',1,3);
INSERT INTO PRODUCT (PRODID,PRODCONDITION,PRODDESC,PRODPRICE,PRODSTATUS,GARAGEID,CATEGORYID) VALUES (2,'AVERAGE','NOKIA 5800',500,'0',1,3);
INSERT INTO PRODUCT (PRODID,PRODCONDITION,PRODDESC,PRODPRICE,PRODSTATUS,GARAGEID,CATEGORYID) VALUES (3,'POOR','SAMSUNG',10,'1',1,3);
INSERT INTO PRODUCT (PRODID,PRODCONDITION,PRODDESC,PRODPRICE,PRODSTATUS,GARAGEID,CATEGORYID) VALUES (4,'GOOD','LAMP',450,'0',2,1);
INSERT INTO PRODUCT (PRODID,PRODCONDITION,PRODDESC,PRODPRICE,PRODSTATUS,GARAGEID,CATEGORYID) VALUES (5,'GOOD','HIFI',6600,'1',2,2);
INSERT INTO BID (BIDID,BIDAMOUNT,BIDSTATUS,USERID,PRODID) VALUES (1,3700,'2',20124003,1);
INSERT INTO BID (BIDID,BIDAMOUNT,BIDSTATUS,USERID,PRODID) VALUES (2,500,'2',20124003,2);
INSERT INTO BID (BIDID,BIDAMOUNT,BIDSTATUS,USERID,PRODID) VALUES (3,10,'0',20124002,3);
INSERT INTO BID (BIDID,BIDAMOUNT,BIDSTATUS,USERID,PRODID) VALUES (4,15,'1',20124003,3);
INSERT INTO BID (BIDID,BIDAMOUNT,BIDSTATUS,USERID,PRODID) VALUES (5,430,'2',20124001,4);
INSERT INTO BID (BIDID,BIDAMOUNT,BIDSTATUS,USERID,PRODID) VALUES (6,450,'2',20124002,4);
INSERT INTO BID (BIDID,BIDAMOUNT,BIDSTATUS,USERID,PRODID) VALUES (7,6000,'0',20124001,5);
INSERT INTO BID (BIDID,BIDAMOUNT,BIDSTATUS,USERID,PRODID) VALUES (8,6600,'1',20124003,5);
INSERT INTO SALESHISTORY (USERID,TOTALSALES,TOTALSALESCOUNT) VALUES (20124001,10,1);
INSERT INTO SALESHISTORY (USERID,TOTALSALES,TOTALSALESCOUNT) VALUES (20124002,6600,1);
INSERT INTO PRODUCTSALES (PRODID,PRODCONDITION,PRODDESC,PRODPRICE,USERID,BIDDERID) VALUES (3,'POOR','SAMSUNG',10,20124001,20124003);
INSERT INTO PRODUCTSALES (PRODID,PRODCONDITION,PRODDESC,PRODPRICE,USERID,BIDDERID) VALUES (5,'GOOD','HIFI',6600,20124002,20124003);